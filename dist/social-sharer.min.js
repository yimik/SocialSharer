/*!
 * social-sharer.js v1.1.2
 * http://cople.github.io/SocialSharer
 * Licensed under MIT
 */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.SocialSharer=e()}(this,function(){"use strict";function t(t){var e=document.querySelector("meta[name='"+t+"']");return e?e.content:e}function e(t){var e=document.querySelector("meta[property='"+t+"']");return e?e.content:e}function i(){var t=document.querySelector("link[rel='canonical']");return t?t.href:t}var r=Object.assign||function(t,e){if(void 0===t||null===t)return t;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},o=function(){this.init.apply(this,arguments)};return o.templates={weibo:"http://service.weibo.com/share/share.php?url={url}&title={title}&pic={pic}&appkey={weiboKey}",qq:"http://connect.qq.com/widget/shareqq/index.html?url={url}&title={title}&summary={summary}&pics={pic}&site={source}",qzone:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={url}&title={title}&summary={summary}&pics={pic}&site={source}",douban:"https://www.douban.com/share/service?url={url}&title={title}&text={summary}&image={pic}",facebook:"https://www.facebook.com/sharer/sharer.php?u={url}",twitter:"https://twitter.com/intent/tweet?url={url}&text={title}&via={twitterVia}&hashtags={twitterHashTags}",gplus:"https://plus.google.com/share?url={url}",linkedin:"http://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={summary}&source={source}",evernote:"http://www.evernote.com/clip.action?url={url}&title={title}",yingxiang:"http://app.yinxiang.com/clip.action?url={url}&title={title}",qrcode:"//pan.baidu.com/share/qrcode?w={qrcodeSize}&h={qrcodeSize}&url={url}",email:"mailto:?subject={title}&body={url}",webshare:"javascript:;"},o.prototype={constructor:o,init:function(n,s){this.templates=r({},o.templates),this.defaults={url:e("og:url")||i()||location.href,title:e("og:title")||document.title,summary:e("og:description")||t("description")||"",pic:e("og:image")||(document.images.length?document.images[0].src:""),source:e("og:site_name")||"",weiboKey:"",twitterVia:"",twitterHashTags:"",wechatTitle:"分享到微信",wechatTip:"用微信「扫一扫」上方二维码即可。",qrcodeSize:260,services:["weibo","wechat","qzone","qq","douban","yingxiang"],classNamePrefix:"icon icon-",onRender:null,onClick:null},this.container="string"==typeof n?document.querySelector(n):n,this.container._SocialSharer||(this.container._SocialSharer=this,this.options=r(this.defaults,this.mergeOptions(s||{})),this.options.qrcodeSize*=Math.min(2,window.devicePixelRatio||1),this.createIcons())},mergeOptions:function(t){var e,i;for(e in this.defaults)"onRender"!==e&&"onClick"!==e&&(i=this.container.getAttribute("data-"+e.replace(/[A-Z]/g,"-$&").toLowerCase()))&&(t[e]="services"===e?i.split(","):i);return t},setIcon:function(t,e){var i=this;t.className+=" "+this.options.classNamePrefix+e,"wechat"===e?(this.createQRCode(t),t.href="javascript:;"):(t.href=this.getURL(e),"email"!==e&&(t.target="_blank")),this.options.onClick&&(t.onclick=function(t){return i.options.onClick.call(i,t,e)}),"webshare"===e&&(t.origOnClick=t.onclick,t.onclick=function(e){navigator.share({title:i.options.title,text:i.options.text,url:i.options.url}),t.origOnClick&&t.origOnClick(e)}),this.options.onRender&&this.options.onRender.call(this,t,e)},createIcons:function(){var t,e,i,r,o=this.container.querySelectorAll("[data-service]");if(o.length)for(t=0,e=o.length;t<e;t++)i=o[t],r=i.getAttribute("data-service"),"webshare"!==r||navigator.share?this.setIcon(i,r):this.container.removeChild(i);else for(t=0,e=this.options.services.length;t<e;t++)("webshare"!==(r=this.options.services[t])||navigator.share)&&(i=document.createElement("a"),this.setIcon(i,r),this.container.appendChild(i))},createQRCode:function(t){var e=document.createElement("div");e.className="qrcode-box",e.innerHTML="<h4>"+this.options.wechatTitle+"</h4><img src='"+this.getURL("qrcode")+"' /><p>"+this.options.wechatTip+"</p>",t.appendChild(e)},getURL:function(t){var e=this.templates["wechat"===t?"qrcode":t],i=this.options;return e?e.replace(/\{(.*?)\}/g,function(t,e){return encodeURIComponent(i[e])}):e}},o});